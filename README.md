# ComputerNetwork
* 因特网（互联网）
    * 计算机网络的代表
    * 全球第二大网络，仅次于全球电话网
    * 起源于美国，是“网络的网络”
    * 网络是由若干`结点`和连接这些结点的`链路`组成
    * 连接在因特网上的计算机都称为`主机`
* 计算机网络：
    地理位置不同，具有独立功能的`多个计算机系统`通过`通信设备`和`线路`，用`网络软件`使网络资源`共享`的系统
* Internet
    * 大量不同网络构成的网络
    * 使用同一组`公共协议`
    * 提供一组`公共服务`
* www
    * 分布式应用系统，运行在Internet之上
*网络将主机连接在一起，互联网将网络连接在一起，故称为`网络的网络`*
* 计算机网络形成的技术基础
>数据通信技术的日趋成熟
* 计算机网络研究的理论基础
>分组交换概念的提出
* 证明分组交换理论的正确性
>AROANET的成功运行
* 更大规模的网络互联的基础
>TCP/IP协议的广泛应用
* 因特网的组成
>边缘部分：主机（端系统）
>核心部分：网络、路由器
* 主机之间的通信实际上是指主机上某个`进程`与另一台主机上的某个`进程`的通信
* 两种通信方式
>1.客户端-服务器（c/s）
>2.对等方式（p2p）
  本质上仍是C/S，知识每一个主机既是客户又同时是服务器
* 因特网的核心部分
>交换方式
>因特网中最复杂的部分：网络核心
>网络核心中起特殊作用的:路由器
>路由器是实现**分组交换**的关键构建，
 任务：转发收到的分组->网络核心最重要的功能

 * 电路交换
>以电话机为例
>两两相连
>握手原则：N（N-1）/2
>当电话机数量过多，要使用**交换机**

三个阶段：
>1.建立连接
>2.通信
>3.释放连接

存在问题:
>计算机数据具有突发性，导致通信线路利用率很低

* 分组交换
>将较长的报文划分为**较短的**、**固定长度**的数据段
>每一个数据段前添加**首部**构成分组->数据传输的单元

分组的重要性：
>每一个分组的首部都含有**地址**等控制信息
>分组交换网中的结点交换机根据收到分组首部的**地址信息**，把分组转发到下一个结点交换机
>通过这种*存储转发*方式，最后分组就能到达**最终目的地**
*接收端收到分组，去除首部，进行还原*

网络核心部分的**路由器**一般用**高速链路**相连接，网络边缘的**主机**以**相对速率较低的链路**相连接

主机：为用户进行信息处理，与其他主机通过网络交换信息
路由器：转发分组，即进行分组交换的

* 路由器处理分组的过程：
>1.把收到的分组放入**缓存**
>2.查找转发表，找出到某个目的地址应从哪个**端口**转发
>3.把分组送到适当的**端口**转发出去

* 分组交换的优点
>1.高效：动态分配带宽，对通信链路是逐段占用
>2.灵活
>3.迅速：不必先建立连接就能向其他主机发送分组
>4.可靠：网络协议可靠；分布式路由选择协议使网络的生存性好

* 分组交换的问题
>1.各结点转发造成的时延
>2.首部的开销

* 三种交换的对比
![img](\img\2.jpg)

* 几种不同类别的网络
    * 根据作用范围来分类
        >1.广域网WAN <1000km
        >2.城域网MAN <100km
        >3.局域网LAN <10km
        >4.个人区域网PAN <10m


### 计算机的性能指标
>1.速率
>2.带宽
>3.吞吐量
>4.时延

* 速率（数据率或者比特率）
>单位：bit 一个二进制数字 1或者0
b/s、kb/s、Mb/s、Gb/s
>含义：主机在通信信道上传送数据的速率
* 带宽
>信号具有的频带宽度
>单位：赫、千赫、兆赫、吉赫
>现在的带宽是通信信道所能传送的“最高数据率”的同义词，单位“比特每秒”，b/s，bit/s

类比：核定功率和实际功率，核定功率是实际功率的最大值。带宽是核定速率

![img](\img\3.jpg)
**在时间轴上信号的宽度随带宽的增大而变窄**
即带宽越大，传输时间越短
* 吞吐量
>单位时间内通过某个网络（或信道、接口）的数据量
>更经常用于对现实世界的网络测量
>受带宽或网络的额定速率的限定

*在同一条线路上对于相同的对象，必存在 速率>吞吐量？*

* 时延
以结点A发送到结点B为例
>结点A中产生**处理时延**和**排队时延**
>结点A的发送端产生**发送时延**
>A到B的链路上产生**传播时延**

发送时延：
>发送数据，数据帧从结点进入传输媒体所需要的时间
>从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕
>公式：发送时延=数据帧长度（b）/发送速率（b/s）

传播时延：
>电磁波在信道中需要传播一定的距离而花费的时间
>公式：传播时延=信道长度（米）/信号在信道上的传播速率（米/秒）

*班级出游，一个班43个同学，从第一个同学开始上校车，到第43个同学上校车所产生的时间，即为**发送时延**。校车从学校到目的地所需要的时间为**传输时延**。*

**信号发送速率和信号在信道上的传播速率完全不同**
即上校车的**速度**和校车的**行驶速度**完全无关

排队时延：
>交换结点为存储转发而进行一些必要的处理所发费的时间

*上校车之前老师交代本次活动的注意事项*

排队时延：
>结点缓存队列中分组排队所经历的时延
>取决于网络当时的通信量

*按照规则，按照班级，要上一个班级登上其所在的校车，当前班级才可以排队进入等候区，前面未上车的班级越多，**排队时延**越长*

总时延是各时延之和
即
>总时延=发送时延+传播时延+处理时延+排队时延

**<del>带宽越高，比特传输越快</del>**
信道传输速率与传播速率
>高速网路链路仅仅提高了**发送速率**，即减少了**发送时延**，而非**比特在链路上的传输速率**

*即校车可以更快的到达高速公路，但不会在高速公路上跑的更快*

光纤信道的传输速率高是指**发送数据**的速率很高，**信道上的传播速率**甚至略低于铜线

* 时延带宽积
>以比特为单位的链路长度
>链路上的最大比特数（信道被充分利用）

*将比特充满信道的截面，类似于比特流*
*充满高速公路，且保持核定速率前行的车流*

* 往返时间RTT
>从请求方发送消息开始到接受到回复，共经历的时间

>卫星的往返时延较长，故将RTT作为重要的性能指标

*信道利用率
>信道有百分几的时间是被利用的（有数据通过）
网络利用率
>全网络的信道利用率的加权平均值

*信道利用率并非越高越好*
信道作为共享资源，越利用率过高，信道可能处于繁忙状态，用户无法接入
利用率过低，通信公司的经济上不合算

即信道利用率增加，该信道的时延也迅速增加
公式：D=A（1-U）
其中U为信道利用率（0-1），A为空闲状态下的时延，D为当前状态下的时延

### 计算机网络的非性能特征
>费用
>质量
>标准化
>可靠性
>可扩展性和可升级性
>易于管理和维护

### 计算机网络的四个重要的概念
>协议
>层次
>接口
>体系结构
* 网络协议
含义：
>为进行网络中的数据交换而建立的规则、标准或约定
三要素：
> 1.语法：数据与控制信息的结构或格式
> 2.语义：需要发出何种控制信息，完成何种动作，作出何种响应
> 3.同步：事件顺序的详细说明
* 层次
> 为处理复杂问题而进行分层
> 高层可以使用低层的服务，而不需要知道其实现细节。
> 不同系统的最底层存在着“物理”通信
对等层之间存在着“虚拟”通信

分层的好处
>1.各层间独立
>2.灵活性好
>3.结构上可分割开
>4.易于实现和维护
>5.能促进标准化工作

* 接口
含义
>同一结点内**相邻层**之间交换信息的连接点
>低层通过接口向高层提供服务
>只要接口条件和低层功能不变，低层的具体实现方法不影响整个系统的工作

*类比ssh框架里的dao->servlet->action*

*分层是不同主机间对应进程，接口是一个主机内的不同层次*
* 网络体系结构
>按**层次结构**进行组织的
>层次结构模型与各层协议的集合

*即如何分层和每一层的规则*
>对计算机网络应该实现的功能进行了**精确**的定义
>抽象的
* OSI模型（理论上的，未实现）
三级抽象
>1.体系结构
>2.服务定义
>3.协议说明

![img](img\4.jpg)
各层的功能：
物理层：
>利用传输介质为通信的**网络结点**之间建立、管理和释放物理连接
>实现比特流的透明传输，为数据链路层提供数据传输服务
>数据传输单元：**比特**

数据链路层：
>在通信的**实体**之间建立数据链路连接
>传输**以帧为单位的数据包**
>采用差错控制和流量控制，使有差错的物理线路变成无差错的数据链路

网络层：
>通过路由选择算法**选择最适当的路径**
>数据传输单元：**分组**
>实现拥塞控制、网络互连等功能

传输层：
>向用户提供可靠**端到端**服务
>处理数据包错误、数据包次序、以及其他一些关键传输问题
>对高层屏蔽了下层数据通信的实现细节，是计算机通信体系的**关键**一层
>数据传输单元：**报文**

会话层：
>维护两个结点之间的传输链接，确保点到点的传输不中断
>管理数据交换

表示层：
>处理两个通信系统中交换信息的表示方式
>数据格式变换
>数据加密与解密
>数据压缩与恢复

应用层：
>为应用程序提供网络服务
>需要识别并保证通信对方的可用性，使得协同工作的应用程序之间的同步
>建立传输错误纠正与保证数据完整性的控制机制

* TCP/IP
![img](img\5.jpg)
116-120

综合ISO和TCP/IP，使用五层协议的体系
![img](img\6.jpg)

主机1向主机2发送数据
主机1向下传输，加入首部
主机2向上传输，剥去首部
*数据链路层同时要加上尾部*
*即穿衣服和脱衣服的过程*

* 实体
>任何可发送或接收信息的硬件和软件
* 协议
>对等实体间通信的规则的集合，即某一层的协议

*协议使**水平的**，服务是**垂直的***

同一系统相邻两层的实体进行交互的地方：
服务访问点SAP
接口？

协议要考虑能否应付各种异常情况

路由器转发分组时最多只到**网络层**

